<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="637px" preserveAspectRatio="none" style="width:829px;height:637px;" version="1.1" viewBox="0 0 829 637" width="829px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="300" x="260" y="26.708">Google OAuth Devices Sequence</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="117.25" y2="625.9766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="484.5" x2="484.5" y1="117.25" y2="625.9766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="620.5" x2="620.5" y1="117.25" y2="625.9766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="793" x2="793" y1="117.25" y2="625.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="8" y="113.9482">Limited-Device</text><ellipse cx="66" cy="84.9531" fill="#FEFECE" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="62,72.9531,68,67.9531,66,72.9531,68,77.9531,62,72.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="404.5" y="113.9482">Google-OAuth-Server</text><ellipse cx="485" cy="84.9531" fill="#FEFECE" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="481,72.9531,487,67.9531,485,72.9531,487,77.9531,481,72.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="575.5" y="113.9482">Rich Device</text><ellipse cx="620.5" cy="84.9531" fill="#FEFECE" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="616.5,72.9531,622.5,67.9531,620.5,72.9531,622.5,77.9531,616.5,72.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="775" y="113.9482">User</text><ellipse cx="793.5" cy="47.9531" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M793.5,55.9531 L793.5,82.9531 M780.5,63.9531 L806.5,63.9531 M793.5,82.9531 L780.5,97.9531 M793.5,82.9531 L806.5,97.9531 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="473,144.3828,483,148.3828,473,152.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="479" y1="148.3828" y2="148.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="73" y="143.3169">request code(client_id, scope)</text><polygon fill="#A80036" points="77,173.5156,67,177.5156,77,181.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="484" y1="177.5156" y2="177.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="395" x="83" y="172.4497">[device_code, expires_in, interval, user_code, verification_url]</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="814" x="3" y="198.5156"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="817" y1="198.5156" y2="198.5156"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="817" y1="201.5156" y2="201.5156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="108" y1="234.6484" y2="234.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="108" y1="234.6484" y2="247.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="108" y1="247.6484" y2="247.6484"/><polygon fill="#A80036" points="77,243.6484,67,247.6484,77,251.6484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="73" y="229.5825">display(user_code)</text><polygon fill="#A80036" points="608.5,272.7813,618.5,276.7813,608.5,280.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="614.5" y1="276.7813" y2="276.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="73" y="271.7153">open login(verification_url)</text><polygon fill="#A80036" points="631.5,301.9141,621.5,305.9141,631.5,309.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="625.5" x2="792.5" y1="305.9141" y2="305.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="637.5" y="300.8481">log into google account</text><polygon fill="#A80036" points="631.5,331.0469,621.5,335.0469,631.5,339.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="625.5" x2="792.5" y1="335.0469" y2="335.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="637.5" y="329.981">enter(user_code)</text><polygon fill="#A80036" points="631.5,360.1797,621.5,364.1797,631.5,368.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="625.5" x2="792.5" y1="364.1797" y2="364.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="637.5" y="359.1138">allow scope</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="814" x="3" y="385.1797"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="817" y1="385.1797" y2="385.1797"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="817" y1="388.1797" y2="388.1797"/><polygon fill="#A80036" points="473,417.3125,483,421.3125,473,425.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="479" y1="421.3125" y2="421.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="339" x="73" y="416.2466">poll(client_id, client_secret, device_code, grant_type)</text><polygon fill="#A80036" points="77,446.4453,67,450.4453,77,454.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="484" y1="450.4453" y2="450.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="83" y="445.3794">[access_token, expires_in, refresh_token, scope, token_type]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="108" y1="479.5781" y2="479.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="108" y1="479.5781" y2="492.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="108" y1="492.5781" y2="492.5781"/><polygon fill="#A80036" points="77,488.5781,67,492.5781,77,496.5781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="73" y="474.5122">remember(refresh_token)</text><polygon fill="#A80036" points="473,517.7109,483,521.7109,473,525.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="479" y1="521.7109" y2="521.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="73" y="516.645">call api (token_type, access_token, api-url)</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="814" x="3" y="542.7109"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="817" y1="542.7109" y2="542.7109"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="817" y1="545.7109" y2="545.7109"/><polygon fill="#A80036" points="473,574.8438,483,578.8438,473,582.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="479" y1="578.8438" y2="578.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="372" x="73" y="573.7778">refresh(client_id, client_secret, grant_type, refresh_token)</text><polygon fill="#A80036" points="77,603.9766,67,607.9766,77,611.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="484" y1="607.9766" y2="607.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="83" y="602.9106">[access_token, expires_in, scope, token_type]</text><!--MD5=[a94d13520e90fb90392e691bdc12f152]
@startuml
skinparam style strictuml

title Google OAuth Devices Sequence

control "Limited-Device" as ld
control "Google-OAuth-Server" as gos
control "Rich Device" as rd 
actor User as u

ld -> gos : request code(client_id, scope)
gos -> ld : [device_code, expires_in, interval, user_code, verification_url]

====

ld -> ld : display(user_code)
ld -> rd : open login(verification_url)

u -> rd : log into google account
u -> rd : enter(user_code)
u -> rd : allow scope

====

ld -> gos : poll(client_id, client_secret, device_code, grant_type)
gos -> ld : [access_token, expires_in, refresh_token, scope, token_type]
ld -> ld : remember(refresh_token)

ld -> gos : call api (token_type, access_token, api-url)

====

ld -> gos : refresh(client_id, client_secret, grant_type, refresh_token)
gos -> ld : [access_token, expires_in, scope, token_type]
@enduml

PlantUML version 1.2020.09beta17(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>